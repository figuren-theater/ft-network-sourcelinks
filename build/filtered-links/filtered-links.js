!function(){"use strict";var e=window.wp.i18n,t=window.wp.blocks,n=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":2,"name":"figurentheater/filtered-links","version":"0.1.0","title":"Filtered Links","category":"widgets","icon":"admin-links","description":"Shows a filtered links list, prefilled with my URLs.","attributes":{"link_category_slug":{"type":"string","default":"own"},"tagName":{"type":"string","default":"ul"},"humanReadable":{"type":"boolean","default":true}},"example":{"viewportWidth":500},"supports":{"html":false,"reusable":false},"textdomain":"ft-network-sourcelinks","editorScript":"file:filtered-links.js","editorStyle":"file:filtered-links.css","style":"file:filtered-links-style.css"}'),l=window.wp.element,i=window.wp.blockEditor,s=window.wp.data,r=window.wp.coreData,o=window.wp.htmlEntities,a=window.wp.components;function c(e){let{link_category_slug:t,humanReadable:n}=e,{link_cat_term:i,hasResolvedLinkCat:o}=(0,s.useSelect)((e=>{let n=["taxonomy","link_category",{per_page:1,slug:t}];return{link_cat_term:e(r.store).getEntityRecords(...n),hasResolvedLinkCat:e(r.store).hasFinishedResolution("getEntityRecords",n)}}),[t]);const{links:a,hasResolved:c}=(0,s.useSelect)((e=>{const t=["postType","ft_link",{per_page:25}];return{links:e(r.store).getEntityRecords(...t),hasResolved:e(r.store).hasFinishedResolution("getEntityRecords",t)}}),[n]);return(0,l.createElement)(d,{hasResolved:c,links:a,hasResolvedLinkCat:o,link_cat_term:i,humanReadable:n})}function d(t){var n,s;let{hasResolved:r,links:c,hasResolvedLinkCat:d,link_cat_term:u,humanReadable:k}=t;if(!d||!r)return(0,l.createElement)("div",(0,i.useBlockProps)(),(0,l.createElement)(a.Spinner,null));let m=c;return null!=u&&u.length&&(m=c.filter((e=>e.link_category.includes(u[0].id)))),null!==(n=m)&&void 0!==n&&n.length?(0,l.createElement)("ul",(0,i.useBlockProps)(),null===(s=m)||void 0===s?void 0:s.map((e=>(0,l.createElement)("li",{key:e.id},k?(0,l.createElement)("a",{href:e.link,title:(0,o.decodeEntities)(e.title.rendered)},(e=>{let t=new URL(e);return(t.host+t.pathname).replace(/\/$/,"")})(e.link)):(0,l.createElement)("a",{href:e.link},(0,o.decodeEntities)(e.title.rendered)))))):(0,l.createElement)("div",(0,i.useBlockProps)(),(0,l.createElement)(a.Notice,{isDismissible:!1,status:"warning"},(0,e.__)("No Links available in the chosen category.","ft-network-sourcelinks")))}const{name:u,...k}=n;(0,t.registerBlockType)(u,{...k,title:(0,e.__)("Filtered Links","ft-network-sourcelinks"),description:(0,e.__)("Shows a filtered links list, prefilled with my URLs.","ft-network-sourcelinks"),edit:function(t){let{attributes:{link_category_slug:n,humanReadable:o},setAttributes:d}=t;const{link_cat_terms:u,hasResolvedLinkCats:k}=(0,s.useSelect)((e=>{const t=["taxonomy","link_category",{per_page:100}];return{link_cat_terms:e(r.store).getEntityRecords(...t),hasResolvedLinkCats:e(r.store).hasFinishedResolution("getEntityRecords",t)}}),[]);return(0,l.createElement)(l.Fragment,null,(0,l.createElement)(i.InspectorControls,null,(0,l.createElement)(a.PanelBody,{title:(0,e.__)("Settings")},(0,l.createElement)(a.ToggleControl,{label:(0,e.__)("Show URLs or Title.","ft-network-sourcelinks"),onChange:e=>d({humanReadable:e}),checked:o}),(0,l.createElement)(a.RadioControl,{label:(0,e.__)("Show Links by category.","ft-network-sourcelinks"),selected:n,options:null==u?void 0:u.map((e=>({label:e.name,value:e.slug}))),onChange:function(e){d({link_category_slug:e})}}))),(0,l.createElement)(c,{link_category_slug:n,humanReadable:o}))},save:function(){return null}})}();